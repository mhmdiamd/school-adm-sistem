echo "âœ… Running Pre-push Checks..."

# Type Checking
echo "ğŸ“ Running TypeScript type check..."
yarn type-check
if [ $? -ne 0 ]; then
  echo "âŒ Type errors detected. Push aborted!"
  exit 1
fi

# Linting
echo "ğŸ” Linting code..."
yarn lint
if [ $? -ne 0 ]; then
  echo "âŒ Linting errors detected. Push aborted!"
  exit 1
fi

# Prettier Check
echo "ğŸ¨ Checking code formatting..."
yarn format:check
if [ $? -ne 0 ]; then
  echo "âŒ Formatting issues detected. Run 'yarn format' to fix. Push aborted!"
  exit 1
fi

# Running Tests
# echo "ğŸ§ª Running tests..."
# yarn test
# if [ $? -ne 0 ]; then
#   echo "âŒ Tests failed. Push aborted!"
#   exit 1
# fi

# Security Audit
echo "ğŸ”’ Running security audit..."
yarn audit --groups dependencies
if [ $? -ne 0 ]; then
  echo "âŒ Security vulnerabilities found. Push aborted!"
  exit 1
fi

echo "ğŸš€ All checks passed. Proceeding with push..."
